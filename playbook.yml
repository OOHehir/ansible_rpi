# Routine playbook
---
- hosts: all
  become: yes
  become_user: root
  become_method: sudo
  gather_facts: yes
  vars:
    repo_path: /home/ansible
    user_path: /home/octopus
    file_list:
      - givEnergy.py
      - parse_rest.py

  tasks:
  - name: Create a directory if it does not exist
    ansible.builtin.file:
    path: /home/octopus
    state: directory
    mode: '0755'

  - name: Update python scripts
    ansible.builtin.copy:
      src: '{{item}}'
      dest: '{{ user_path }}'
      mode: '0644'
      owner: octopus
      group: octopus
    loop: '{{ file_list }}'